<div
  id="header-bg"
  [@toggleBackground]="headerState"
></div>
<div
  id="uva-header"
  [@toggleHide]="headerState"
  fxLayout="row"
  fxLayoutAlign="center center"
>
  <div
    class="uva-logo"
    fxFlex
  ><a
      target="_blank"
      href="https://curry.virginia.edu/faculty-research/centers-labs-projects/supporting-transformative-autism-research-star"
    >Return to UVA STAR project home page</a></div>
  <span fxFlex></span>
  <a
    mat-button
    *ngIf="currentUser && currentUser.role == 'admin'"
    [routerLink]="[ '/admin' ]"
    routerLinkActive="selected"
    id="admin-button"
  >
    <mat-icon>build</mat-icon>
    Admin
  </a>

</div>
<div
  id="site-header"
  [ngClass]="{'mirroring': status.mirroring}"
  fxLayout="row"
  fxLayoutAlign="center center"
  [@toggleDock]="headerState"
>
  <div class="mirror-message" *ngIf="status.mirroring">THIS IS A MIRRORED SERVER</div>

  <mat-toolbar [ngClass]="{'mirroring': status.mirroring}">
    <mat-toolbar-row
      id="menu-bar"
      fxLayout="row"
    >
      <app-logo variant="dark"></app-logo>
      <span fxFlex></span>
      <div
        id="primary-nav"
        *ngIf="!mobileQuery.matches"
      >
        <ul>
          <li><a
          mat-button
          [routerLink]="[ '/enroll' ]"
          routerLinkActive="selected"
          id="enroll-button"
        >
          <span
            fxHide
            fxShow.lt-lg
          >About</span>
          <span
            fxHide
            fxShow.gt-md
          >About Autism DRIVE</span>
        </a></li>
        <li><a
          mat-button
          [routerLink]="[ '/studies' ]"
          routerLinkActive="selected"
          id="studies-button"
        >
          <span
            fxHide
            fxShow.lt-lg
          >Studies</span>
          <span
            fxHide
            fxShow.gt-md
          >Current Studies</span>
        </a></li>
        <li><a
          mat-button
          [routerLink]="[ '/resources' ]"
          routerLinkActive="selected"
          id="resources-button"
        >
          <span
            fxHide
            fxShow.lt-lg
          >Support</span>
          <span
            fxHide
            fxShow.gt-md
          >Find Support</span>
        </a></li>

        <li *ngIf="!currentUser"><a
          mat-button
          [routerLink]="[ '/register' ]"
          routerLinkActive="selected"
          id="register-button"
        >
          <span
            fxHide
            fxShow.lt-lg
          >Join</span>
          <span
            fxHide
            fxShow.gt-md
          >Join Us</span>
        </a></li>
        <li *ngIf="!currentUser"><a
          mat-button
          [routerLink]="[ '/login' ]"
          routerLinkActive="selected"
          id="login-button"
        >
          Sign in
        </a></li>
        <li *ngIf="currentUser"><a
          mat-button
          [routerLink]="[ '/profile' ]"
          routerLinkActive="selected"
          id="profile-button"
        >
          <mat-icon>account_circle</mat-icon>
          <span
            fxHide
            fxShow.lt-lg
          > Profile</span>
          <span
            fxHide
            fxShow.gt-md
          > View Profile</span>
        </a></li>
        <li *ngIf="currentUser"><a
          mat-button
          (click)="goLogout($event)"
          id="logout-button"
        >
          <mat-icon>exit_to_app</mat-icon>
          Logout
        </a></li>

        </ul>
      </div>

      <button
        mat-button
        (click)="toggleMenu()"
        fxHide
        fxShow.lt-md
        [color]="menuVisible ? '' : 'accent'"
      >
        <mat-icon>menu</mat-icon>
      </button>
    </mat-toolbar-row>
    <mat-toolbar-row class="search">
      <p>A centralized system for autism-focused research, resources and supports for families and professionals.</p>
      <span fxFlex></span>
      <app-search-box
        variant="dark-bg"
        fxHide
        fxShow.gt-sm
      ></app-search-box>
    </mat-toolbar-row>
  </mat-toolbar>

</div>
<div
  id="mobile-menu"
  fxHide
  fxShow.lt-md
  [@toggleMobileMenu]="menuState"
  [ngClass]="{'mirroring': status.mirroring}"
  class="mat-typography"
>
  <app-search-box variant="dark-bg"></app-search-box>
  <a
    mat-button
    *ngIf="!currentUser"
    [routerLink]="[ '/register' ]"
    routerLinkActive="selected"
    id="register-button-mobile"
    (click)="toggleMenu()"
  >
    <mat-icon>person_add</mat-icon>
    Create Account
  </a>
  <a
    mat-button
    *ngIf="!currentUser"
    [routerLink]="[ '/login' ]"
    routerLinkActive="selected"
    id="login-button-mobile"
    (click)="toggleMenu()"
  >
    <mat-icon>account_circle</mat-icon>
    Sign in
  </a>
  <a
    mat-button
    *ngIf="currentUser && currentUser.role == 'admin'"
    [routerLink]="[ '/admin' ]"
    routerLinkActive="selected"
    id="admin-button-mobile"
    (click)="toggleMenu()"
  >
    <mat-icon>build</mat-icon>
    Admin
  </a>
  <a
    mat-button
    *ngIf="currentUser"
    [routerLink]="[ '/profile' ]"
    routerLinkActive="selected"
    id="profile-button-mobile"
    (click)="toggleMenu()"
  >
    <mat-icon>account_circle</mat-icon>
    Visit Profile
  </a>
  <a
    mat-button
    *ngIf="currentUser"
    (click)="goLogout($event)"
    id="logout-button-mobile"
    (click)="toggleMenu()"
  >
    <mat-icon>exit_to_app</mat-icon>
    Logout
  </a>
  <a
    mat-button
    [routerLink]="[ '/enroll' ]"
    routerLinkActive="selected"
    id="enroll-button-mobile"
    (click)="toggleMenu()"
  >Join the Autism Registry</a>
  <a
    mat-button
    [routerLink]="[ '/studies' ]"
    routerLinkActive="selected"
    id="studies-button-mobile"
    (click)="toggleMenu()"
  >Current studies</a>
  <a
    mat-button
    [routerLink]="[ '/resources' ]"
    routerLinkActive="selected"
    id="resources-button-mobile"
    (click)="toggleMenu()"
  >Training &amp; Resources</a>
</div>
