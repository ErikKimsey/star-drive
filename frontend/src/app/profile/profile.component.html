<div
  *ngIf="user"
  class="profile mat-typography"
>

  <div *ngIf="state === possibleStates.NO_PARTICIPANT">
    <h1>Welcome!</h1>
    <p>Thank you for creating an account on Autism DRIVE! Please complete the following fields, and select
      the button that most closely applies to your situation.</p>
    <button
      mat-flat-button
      color="primary"
      (click)="enrollSelf($event)"
      id="enroll_self"
    >Enroll Yourself as a person with Autism</button>
    <p>
      Select this button if you are primarily looking for resources, or studies for yourself.
    </p>
    <button
      mat-flat-button
      color="primary"
      (click)="enrollGuardian($event)"
      id="enroll_guardian"
    >Enroll a Dependent</button>
    <p>
      Select this button if you are looking for resources and studies for your son, daughter, or legal dependent.
    </p>
    <button
      mat-flat-button
      color="primary"
      (click)="enrollProfessional($event)"
      id="enroll_professional"
    >Enroll Yourself as a Professional</button>
    <p>
      Select this button if you are a professional primarily looking for resources, or studies for yourself.
    </p>
  </div>

  <div *ngIf="state !== possibleStates.NO_PARTICIPANT">
    <h1>Your Autism DRIVE Profile</h1>
    <div>
      <p>Once your profile is complete, youâ€™ll be able to enroll in any relevant currently-running studies.</p>

      <app-loading
        *ngIf="loading"
        message="Loading..."
      ></app-loading>

      <div
        *ngIf="!loading"
        fxLayout="row"
        fxLayout.lt-md="column"
        fxLayoutGap="40px"
      >
        <div
          fxFlex="60%"
          fxLayout="column"
          fxLayoutGap="40px"
        >
          <app-participant-profile
            *ngFor="let participant of user.participants"
            [participant]="participant"
            [user]="user"
            id="participant_{{participant.id}}"
          ></app-participant-profile>

          <button
            *ngIf="user.getSelf() && user.getDependents().length === 0"
            mat-flat-button
            color="primary"
            (click)="enrollDependent($event)"
            id="enroll_first_dependent"
          >Enroll a dependent</button>

          <button
            *ngIf="user.getDependents().length > 0"
            mat-flat-button
            color="primary"
            (click)="enrollDependent($event)"
            id="enroll_another_dependent"
          >Enroll another dependent</button>
        </div>
        <div fxFlex="40%">
          <mat-card>
            <mat-card-title>Research Studies</mat-card-title>
            <mat-card-content>
              <mat-list>
                <div
                  *ngIf="studyInquiries && studyInquiries.length > 0"
                  id="study-inquiries"
                >
                  <mat-card-subtitle>Studies about which you have inquired</mat-card-subtitle>
                  <mat-list-item *ngFor="let s of studyInquiries">
                    <a
                      mat-line
                      href="/#/study/{{s.study.id}}"
                    >{{ s.study.short_title }}</a>
                    <p mat-line>{{ s.study.short_description }}</p>
                  </mat-list-item>
                </div>
                <div
                  *ngIf="currentStudies && currentStudies.length > 0"
                  id="current-studies"
                >
                  <mat-card-subtitle>All currently-enrolling studies</mat-card-subtitle>
                  <mat-list-item *ngFor="let s of currentStudies">
                    <a
                      mat-line
                      href="/#/study/{{s.id}}"
                    >{{ s.short_title }}</a>
                    <p mat-line>{{ s.short_description }}</p>
                  </mat-list-item>
                </div>
              </mat-list>
            </mat-card-content>
          </mat-card>
        </div>
      </div>

    </div>
  </div>

</div>
