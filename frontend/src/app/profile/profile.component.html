<div
  *ngIf="user"
  class="profile mat-typography"
>

  <div *ngIf="state === possibleStates.NO_PARTICIPANT">
    <h1>New Account Registration</h1>
    <h2>Welcome!</h2>
    <p>Thank you for creating an account on Autism DRIVE. To complete your registration, select the button below that
      best describes <b>you.</b> You will have additional opportunities to enter information about your children or
      dependents after completing your own registration.</p>
    <div
      fxLayout="column"
      fxLayoutAlign="start start"
      fxLayoutGap="2em"
    >
      <button
        mat-flat-button
        color="primary"
        (click)="enrollSelf($event)"
        id="enroll_self"
      >I am an adult with autism and I am my own legal guardian</button>
      <button
        mat-flat-button
        color="primary"
        (click)="enrollGuardian($event)"
        id="enroll_guardian"
      >I am the parent/legal guardian of a child or adult with autism</button>
      <button
        mat-flat-button
        color="primary"
        (click)="enrollProfessional($event)"
        id="enroll_professional"
      >I am a student/professional with an interest in autism</button>
    </div>
  </div>

  <div *ngIf="state !== possibleStates.NO_PARTICIPANT">
    <h1>Your Autism DRIVE Profile</h1>
    <div>
      <p>Once your profile is complete, youâ€™ll be able to enroll in any relevant currently-running studies.</p>

      <app-loading
        *ngIf="loading"
        message="Loading..."
      ></app-loading>

      <div
        *ngIf="!loading"
        fxLayout="row"
        fxLayout.lt-md="column"
        fxLayoutGap="40px"
      >
        <div
          fxFlex="60%"
          fxLayout="column"
          fxLayoutGap="40px"
        >
          <app-participant-profile
            [participant]="self"
            [user]="user"
            id="self_participant_{{self.id}}"
          ></app-participant-profile>

          <app-participant-profile
            *ngFor="let participant of dependents"
            [participant]="participant"
            [user]="user"
            id="dependent_participant_{{participant.id}}"
          ></app-participant-profile>

          <button
            *ngIf="user.getSelf() && user.getDependents().length === 0"
            mat-flat-button
            color="primary"
            (click)="enrollDependent($event)"
            id="enroll_first_dependent"
          >Enroll a dependent</button>

          <button
            *ngIf="user.getDependents().length > 0"
            mat-flat-button
            color="primary"
            (click)="enrollDependent($event)"
            id="enroll_another_dependent"
          >Enroll another dependent</button>
        </div>
        <div fxFlex="40%">
          <mat-card>
            <mat-card-title>Research Studies</mat-card-title>
            <mat-card-content>
              <mat-list>
                <div
                  *ngIf="studyInquiries && studyInquiries.length > 0"
                  id="study-inquiries"
                >
                  <mat-card-subtitle>Studies about which you have inquired</mat-card-subtitle>
                  <mat-list-item *ngFor="let s of studyInquiries">
                    <a
                      mat-line
                      href="/#/study/{{s.study.id}}"
                    >{{ s.study.short_title }}</a>
                    <p mat-line>{{ s.study.short_description }}</p>
                  </mat-list-item>
                </div>
                <div
                  *ngIf="currentStudies && currentStudies.length > 0"
                  id="current-studies"
                >
                  <mat-card-subtitle>All currently-enrolling studies</mat-card-subtitle>
                  <mat-list-item *ngFor="let s of currentStudies">
                    <a
                      mat-line
                      href="/#/study/{{s.id}}"
                    >{{ s.short_title }}</a>
                    <p mat-line>{{ s.short_description }}</p>
                  </mat-list-item>
                </div>
              </mat-list>
            </mat-card-content>
          </mat-card>
        </div>
      </div>

    </div>
  </div>

</div>
